<div class="container">
  <h1>Task Manager</h1>
  <div style="margin-bottom: 1rem;">
    <input
      type="text"
      [(ngModel)]="searchText"
      placeholder="Search tasks by title"
    />
    <div style="margin-bottom: 1rem;">
      <label for="externalTodo">Import Task:</label>
      <select id="externalTodo" (change)="onImportTodo($event)">
        <option selected disabled value="">Select a task to import</option>
        <option *ngFor="let todo of externalTodos; let i = index" [value]="i">
          {{ todo.todo | slice:0:50 }}{{ todo.todo.length > 50 ? '…' : '' }}
        </option>
      </select>
    </div>
  </div>
  <form (submit)="addTask(); $event.preventDefault()">
    <input type="text" [(ngModel)]="newTaskTitle" name="taskTitle" placeholder="Enter a new task" />
    <button type="submit">Add Task</button>
  </form>
  <ul>
    <li *ngFor="let task of filteredTasks" style="display: flex; align-items: center; gap: 10px;">
      <input type="checkbox" [(ngModel)]="task.completed" (change)="toggleTask(task)" />
      <span [style.text-decoration]="task.completed ? 'line-through' : 'none'">
        {{ task.title }}
      </span>
      <span *ngIf="getSubtaskProgress(task)" style="font-size: 0.8em; color: gray;">
        ({{ getSubtaskProgress(task) }})
      </span>
      <button (click)="goToTask(task.id)">View</button>
      <button (click)="deleteTask(task)">❌</button>
      
    </li>
  </ul>
</div>
