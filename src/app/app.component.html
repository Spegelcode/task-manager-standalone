<div class="container">
  <h1>Task Manager</h1>
  <div style="margin-bottom: 1rem;">
    <input
      type="text"
      [(ngModel)]="searchText"
      placeholder="Search tasks by title"
    />
    <div style="margin-bottom: 1rem;">
      <select id="externalTodo" (change)="onImportTodo($event)">
        <option selected disabled value="">Select a task to import</option>
        <option *ngFor="let todo of externalTodos; let i = index" [value]="i">
          {{ todo.todo | slice:0:50 }}{{ todo.todo.length > 50 ? '…' : '' }}
        </option>
      </select>
    </div>
  </div>
  <form (submit)="addTask(); $event.preventDefault()">
    <input type="text" [(ngModel)]="newTaskTitle" name="taskTitle" placeholder="Enter a new custom task" />
    <button type="submit">Add Task</button>
  </form>

<h2>📋 Incomplete Tasks</h2>
<ul class="task-list">
  <li *ngFor="let task of incompleteTasks" class="task-item">
    <div class="task-header">
      <span class="task-title">{{ task.title }}</span>
      <span class="task-progress">{{ getSubtaskProgress(task) }}</span>
    </div>
    <div class="task-actions">
      <button (click)="goToTask(task.id)">👁️ View</button>
      <button (click)="deleteTask(task)">🗑️ Delete</button>
    </div>
  </li>
</ul>

<h2>✅ Completed Tasks</h2>
<ul class="task-list">
  <li *ngFor="let task of completedTasks" class="task-item completed">
    <div class="task-header">
      <span class="task-title">{{ task.title }}</span>
      <span class="task-progress">{{ getSubtaskProgress(task) }}</span>
    </div>
    <div class="task-actions">
      <button (click)="goToTask(task.id)">👁️ View</button>
      <button (click)="deleteTask(task)">🗑️ Delete</button>
    </div>
  </li>
</ul>


<div style="max-width: 400px;">
  <canvas
    baseChart
    [data]="pieChartData"
    [labels]="pieChartLabels"
    [type]="pieChartType">
  </canvas>
</div>



</div>
